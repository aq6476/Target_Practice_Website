<!--
Angel Quintanilla
CS 326 - 1002 
6 October 2022
Program Description:
    This program is a html targetting practice that will have the user 
    "Shoot" a target by clicking on them. The user can accumulate combos
    as well as change the difficulty of the challenge as the targets 
    do move 
-->
<!DOCTYPE html>
<html>
<title >
    Target Practice!
</title>

<style>

    /*CSS Configs for main Target Area*/    
    #TargetBox{
        background-color: rgb(13, 51, 155);
        margin:auto;
        border: 3px solid black;
        width: 80vw;
        height: 70vh;
        border-radius: 5%;
        position: relative;
    }

    /*CSS Configs for top 3 buttons for game interaction*/
    .gameButton{
        border: 4px solid black;
        border-radius: 5%;
        background-color: orange;
        width: 200px;
        height: 100px;
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 30px;
        box-shadow: 0 10px rgb(104, 92, 92);
        cursor: pointer;
 
    }
    
    /*Configs for buttons acting as pressed down*/
    .gameButton:active {
        background-color: greenyellow;
        top:10px;
        box-shadow: 0 3px rgb(104, 92, 92);
        position: relative;
        
    }

    /*Configs for target enemy which counts as a button*/
    #enemyButton{
        border-color: transparent;
        background-color: transparent;
        margin-top: 25vh;
        margin-left: 33vw;
        cursor: pointer;
    }

    /*Configs for general IO elements below the top three*/
    input
    {
        border: 4px solid black;
        border-radius: 5%;
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
    }
    

</style>

<!---->
<body onload = "main()">

<div style="background-color: tan; height: 100vh; width: 100vw; position: s">

    <header>
        <center><p>Shoot the Bat to Begin!!!</p></center>
    </header>



    <!--Print out box for the clicking-->
    <div id = "TargetBox">
            <button id = "enemyButton" onclick="register_hit()">
                <img src="dracky.png" alt = "no dracky today :(" style = "width: 15vw;">
            </button>
    </div>

    <!--Display buttons for the Reset, Pausing, and an additional button-->
    <div>
        <center>
            <button class="gameButton" onclick="reset_game() ">
                Reset Game!
            </button>
            <button class="gameButton" onclick ="pause_unpause()">
                Pause Game (II) 
            </button>
            <button class="gameButton" onclick = "play_knocking_noise()"> 
                Do NOT press
            </button>
        </center>
        <br>
    </div>



    <!--Print out Stats buttons for coordinates and speed-->
    <center>
        <label>
            Current x position:
        </label>
        <input type = "text" readonly = "readonly" id = "xCoordBox"> 
        
        <label>
            Current y position:
        </label>
        <input type="text" readonly = "readonly" id = "yCoordBox">
        <br>

        <label>Current Speed:</label>
        <input type="text" readonly = "readonly" id = "currentSpeedBox">

        <label>Current Combo:</label>
        <input type="text" readonly = "readonly" id = "comboTextBox">



        <br>
        <button style = "height: 20x; width: 200px;margin-top: 10px;"
                onclick="change_speed()"> 
            Submit New Speed 
        </button>

        <input type = "number" id = "newSpeedBox">
        <br>
    </center>
</div>


<script>
    
    /*
    Global Variables for the game, the pause flag, the combo count, and 
    */
    let paused = true;
    let comboCount = 1;
    let comboDisp = document.getElementById("comboTextBox");
    let enemyDoc = document.getElementById("enemyButton");
    let currentSpeedBox = document.getElementById("currentSpeedBox")
    let milliSecs = 500;
    let boolHit = false;
    let clearID; 

    function main()
    {
        currentSpeedBox.value = milliSecs;
        clearID = setInterval(reset_game, milliSecs);
    }

    /*
    pause_unpause() - toggles the pause switch
    */
    function pause_unpause()
    {   
        if(paused == true)
            paused = false;
        else
            paused = true;
        return;
    }



    /*
    register_hit() - accoutns for hit and moves target
    Args:
        None
    Return Value:
        None
    */
    function register_hit()
    {
        //continue the game if it was paused
        if(paused == true)
            pause_unpause();

        boolHit = true;

        //play the firing sound
        play_fire_sound();
        
        //increment combo counter and change location
        comboDisp.value++;        
        place_in_random_location();
    }

    /*
    place_in_random_location () - places enemy in a random location. 
    Updates applicable "stats" blocks
    Args: 
        None
    Return Value:
        None
    */
    function place_in_random_location()
    {
        //place enemy in random x and y location 
        let enemyDoc = document.getElementById("enemyButton");
        enemyDoc.style.marginTop =  Math.random()*60+"vh";
        enemyDoc.style.marginLeft = Math.random()*60+"vw";


        //print out the x and y location to the corresponding 
        //text boxes
        document.getElementById("xCoordBox").value = enemyDoc.style.marginLeft.substring(0,5);
        document.getElementById("yCoordBox").value = enemyDoc.style.marginTop.substring(0,5);


    }


    /*
    play_fire_sound() - plays a firing sound effect when a player hits
        the target.
    Args:
        None
    Return Value:
        None
    */
    function play_fire_sound()
    {
        var shootEffectContainer = new Audio("shootEffect.mp3");
        shootEffectContainer.play();
    }


    /*
    reset_game() - resets the pause status, combo, and location
    Args:
        None
    Return Value:
        None
    */
    function reset_game()
    {
        if(paused == true)
            return;
        //reset the combo, set paused to true, and move the target to 
        //the default location
        if(boolHit == false){ 
            comboDisp.value = 0;
            place_in_random_location();
            document.getElementById("xCoordBox").value = enemyDoc.style.marginLeft.substring(0,5);
            document.getElementById("yCoordBox").value = enemyDoc.style.marginTop.substring(0,5);
        }
        boolHit = false;    
        
    
    }


    /*
    change_speed() - changes the speed based on what is in the new value
        box
    Args:
        None
    Return Value:
        None
    */
    function change_speed()
    {
        //get value from the text box. if it's an invalid valeu then 
        //set value to 500 (the default)
        milliSecs = document.getElementById("newSpeedBox").value; 
        if(milliSecs <=0)
        {
            alert("Error, Invalid No. Value reset to 500");
            milliSecs = 500;
        }
        currentSpeedBox.value = milliSecs;

        //clear the interval so we can reinitialize
        clearInterval(clearID);
        clearID = setInterval(reset_game, milliSecs);

    }
    /*
    play_knocking_noise() - does this as a result of the "horror" button
        I apologize in advance, I thought it was funny lol.
    Args:
        None
    Return Value:
        None
    */
    function play_knocking_noise()
    {
        var knockingNoiseContainer = new Audio("trollKnock.mp3");
        knockingNoiseContainer.play();
    }

</script>
</body>
</html>